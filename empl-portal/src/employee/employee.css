/* ====== каркас ====== */
.emp-shell { display:flex; min-height:100vh; background:#f6f7fb; }
.emp-sidebar {
  width:240px; padding:24px 16px; background:#fff;
  border-right:1px solid #eceff3; position:sticky; top:0; height:100vh;
}
.emp-sidebar__title { font-weight:700; font-size:18px; margin-bottom:12px; }
.emp-nav { display:flex; flex-direction:column; gap:8px; }
.emp-nav__item { padding:10px 12px; border-radius:12px; text-decoration:none; color:#1f2937; }
.emp-nav__item:hover { background:#f1f5f9; }
.emp-nav__item.is-active { background:#e8f0ff; color:#1e40af; font-weight:600; }

.emp-main { flex:1; padding:28px; }

/* ====== профиль ====== */
.back-btn {
  border:none; background:#e6f0ff; color:#1e3a8a;
  border-radius:50%; width:36px; height:36px; font-size:18px; cursor:pointer;
}
.profile__header { display:flex; gap:24px; margin-top:16px; align-items:flex-end; }
.profile__avatar {
  width:120px; height:120px; border-radius:50%;
  background:linear-gradient(180deg,#f7f7f7,#eaeaea); border:1px solid #e5e7eb;
}
.profile__meter {
  width:60px; height:120px; border-radius:28px; background:#f0f0f0;
  padding:6px; box-shadow: inset 0 1px 2px rgba(0,0,0,.06);
  display:flex; align-items:flex-end;
}
.profile__meter-fill { width:100%; background:#34d399; border-radius:22px; height:0; transition:height .3s; }
.profile__name { margin:16px 0 8px; font-size:28px; font-weight:800; }
.profile__caption { color:#16a34a; font-weight:600; margin-bottom:12px; }

.profile-card { background:#fff; border:1px solid #e5e7eb; border-radius:16px; padding:16px; margin-top:12px; }
.profile-card__head { display:flex; gap:12px; align-items:center; font-weight:700; margin-bottom:8px; }
.profile-card__body { position:relative; padding-right:120px; }
.link { color:#2563eb; background:none; border:none; cursor:pointer; position:absolute; right:0; top:0; }
.link-success { color:#16a34a; text-decoration:none; font-weight:600; }
.muted { color:#6b7280; font-size:12px; margin-top:6px; }
.list { margin:8px 0; padding-left:18px; }
.tags { display:flex; gap:8px; flex-wrap:wrap; margin-top:8px; }
.tags li {
  background:#eef2ff; color:#3730a3; border:1px solid #e0e7ff;
  padding:6px 10px; border-radius:999px; font-size:12px;
}

/* ====== уровень ====== */
.level__badge { display:flex; justify-content:center; margin:16px 0 8px; }
.level__badge-circle {
  width:80px; height:80px; border-radius:50%;
  background:#fde68a; display:flex; align-items:center; justify-content:center; font-weight:800;
}
.level__name { text-align:center; margin:8px 0 16px; }
.level__progress { display:flex; align-items:center; gap:12px; justify-content:center; }
.level__progress-bar { width:240px; height:10px; background:#e5e7eb; border-radius:999px; overflow:hidden; }
.level__progress-fill { height:100%; background:#22c55e; }
.level__progress-next { color:#6b7280; }
.level__tabs { display:flex; align-items:center; gap:12px; justify-content:center; margin:14px 0; }
.level__divider { height:1px; background:#e5e7eb; flex:1; max-width:160px; }
.level__grid { display:grid; grid-template-columns: 1fr 1fr; gap:16px; align-items:start; }
.level__bubble { background:#fff; border:1px solid #e5e7eb; border-radius:16px; padding:16px; text-align:center; }
.level__ladder { display:flex; flex-direction:column; gap:10px; align-items:center; }
.chip { padding:8px 14px; border-radius:12px; border:1px solid #e5e7eb; }
.chip--ghost { background:#f9fafb; }
.chip--success { background:#d1fae5; border-color:#bbf7d0; }
.chip--dashed { border:2px dashed #d1d5db; background:#fff; }

/* ====== чат ====== */
:root{
  --chat-max: 900px;
  --chat-header-h: 56px;   /* фактическая высота шапки */
  --chat-composer-h: 76px; /* высота низа (инпут + отступы) */
}

.chat{
  max-width: var(--chat-max);
  margin: 0 auto;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  padding-top: var(--chat-header-h);
  padding-bottom: calc(var(--chat-composer-h) + 16px);
}

.chat__header{
  position: fixed;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: min(100%, var(--chat-max));
  /* height: var(--chat-header-h);  <-- УДАЛЕНО, высота авто */
  z-index: 50;
  background:#f6f7fb;
  border-bottom:1px solid #eceff3;
  padding:12px 16px;                 /* даёт натуральную высоту */
  text-align:center; font-weight:800; font-size:20px;
  display:flex; align-items:center; justify-content:center;
}
.chat__messages{
  flex:1; overflow:visible;
  padding:12px 4px;                 /* низ добавится через padding у .chat */
  display:flex; flex-direction:column; gap:8px;
  overflow-anchor:none;
}
.bubble { max-width:72%; padding:10px 14px; border-radius:18px; line-height:1.35; white-space:pre-wrap; }
.bubble--user { align-self:flex-end; background:#dbeafe; border:1px solid #bfdbfe; }
.bubble--assistant { align-self:flex-start; background:#f3f4f6; border:1px solid #e5e7eb; }

/* Нижняя панель: прозрачная — нет общего белого прямоугольника */
.chat__composer{
  position: fixed;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%) translateZ(0);
  width: min(100%, var(--chat-max));
  /* height: var(--chat-composer-h); <-- УДАЛЕНО, высота авто */
  z-index: 50;
  display:flex; gap:10px; align-items:flex-end;
  padding:12px 0 16px;
  background:#f6f7fb; border-top:1px solid #e5e7eb;
  contain: layout paint;
}

/* Поле ввода — отдельная скруглённая «капсула» */
/* базово: авто — полоса появится когда нужно */
.chat__input{
  flex:1;
  background:#fff;
  border:1px solid #e5e7eb;
  border-radius:16px;
  padding:12px 14px;
  font:inherit;
  resize:none;
  max-height:160px;
  overflow-y:auto;                 /* включаем скролл по необходимости */
  scrollbar-gutter:auto !important;   /* ← отмена глобального stable только здесь */
}

/* когда контента мало — полностью убираем полосу */
.chat__input.no-scrollbar{
  overflow-y:hidden !important;
  scrollbar-width:none;                 /* Firefox */
}
.chat__input.no-scrollbar::-webkit-scrollbar{
  width:0 !important; height:0 !important; /* Chrome/Edge/Safari */
}

.chat__input:focus{
  border-color:#93c5fd;
  box-shadow: 0 0 0 3px rgba(147,197,253,.35);
}

/* Кнопка отправки — отдельно и на стандартном фоне страницы */
.chat__send{
  padding:12px 16px;
  border:none; border-radius:12px;
  background:#2563eb; color:#fff; font-weight:600;
  cursor:pointer;
}
.chat__send:hover{ filter:brightness(.96); }
.chat__send:active{ transform:translateY(1px); }

/* ——— жёстко обнуляем резерв под скролл только у поля чата ——— */
.chat .chat__composer .chat__input{
  scrollbar-gutter: initial !important; /* отключаем глобальный stable */
  -ms-overflow-style: none;             /* старый Edge/IE не рисует полосу */
}

/* по умолчанию полосу прячем полностью */
.chat .chat__composer .chat__input.no-scrollbar{
  overflow-y: hidden !important;
  scrollbar-width: none !important;               /* Firefox */
}
.chat .chat__composer .chat__input.no-scrollbar::-webkit-scrollbar{
  width: 0 !important;
  height: 0 !important;                           /* Chrome/Safari/Edge */
}

/* когда нужен скролл — возвращаем обычное поведение */
.chat .chat__composer .chat__input.has-scroll{
  overflow-y: auto !important;
  scrollbar-width: auto !important;
}
.chat .chat__composer .chat__input.has-scroll::-webkit-scrollbar{
  width: 8px !important;                           /* если у тебя глобально настроено — оставим как есть */
}


/* ====== настройки ====== */
.settings h1 { margin-bottom:8px; }

html{
  scrollbar-gutter: stable;       /* место под правый скролл всегда зарезервировано */
}



.profile--stack .profile__header{
  display:flex;
  flex-direction:column;          /* вертикально */
  align-items:center;             /* центрируем */
  gap:16px;
  margin-top:16px;
}

/* аватар + индикатор рядом как на макете: на десктопе рядом, на мобиле — можно оставить по умолчанию */
@media (min-width: 760px){
  .profile--stack .profile__header{
    flex-direction:column;        /* по скрину — всё по центру столбиком */
  }
}

.profile--stack .profile__name{
  margin:8px 0 4px;
  font-size:32px;
  font-weight:800;
  text-align:center;
}

.profile--stack .profile__caption{
  margin:0 0 8px;
  color:#16a34a;
  font-weight:600;
  text-align:center;
}

/* стопка карточек по центру */
.profile__stack{
  margin: 12px auto 24px;
  max-width: 680px;               /* уютная ширина */
  display:flex;
  flex-direction:column;
  gap:16px;
}

/* лёгкий апгрейд карточек для «мобильного» вида */
.profile-card{
  background:#fff;
  border:1px solid #e5e7eb;
  border-radius:16px;
  padding:16px;
}
.profile-card__head{ display:flex; align-items:center; justify-content:space-between; }
.profile-card__body{ padding-right:0; position:static; }
.profile-card .link{ position:static; }



/* шапка: аватар + индикатор в одну строку по центру, имя и подпись ниже */
.profile--stack .profile__header{
  text-align: center;
  margin-top: 16px;
}

/* показываем первые два блока (аватар и индикатор) в одну строку */
.profile--stack .profile__avatar,
.profile--stack .profile__meter{
  display: inline-flex;
  vertical-align: middle;
}
.profile--stack .profile__avatar{ margin-right: 24px; }

.profile--stack .profile__name{
  margin: 16px 0 0;
  font-size: 32px;
  font-weight: 800;
  text-align: center;
}
.profile--stack .profile__caption{
  margin: 6px 0 14px;
  color: #16a34a;
  font-weight: 600;
  text-align: center;
}

/* карточки — ровной стопкой по центру */
.profile--stack .profile-card{
  max-width: 680px;
  margin: 12px auto 0;
}
.profile--stack .profile-card__body{ position: static; padding-right: 0; }
.profile--stack .link{ position: static; }

/* небольшая «воздушность» на мобильных */
@media (max-width: 480px){
  .profile--stack .profile__avatar{ margin-right: 16px; }
  .profile--stack .profile-card{ margin-top: 10px; }
}

/* === Профиль: вертикальная раскладка как на скрине 1 === */
.profile.profile--stack{
  max-width: 980px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;         /* всё — одной колонкой */
  align-items: center;            /* центрируем по оси X */
}

/* шапка по центру, вертикально: аватар → индикатор → имя → подпись */
.profile.profile--stack .profile__header{
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
  margin-top: 16px;
  text-align: center;
}

/* аватар и индикатор — столбиком (на десктопе и мобилке одинаково) */
.profile.profile--stack .profile__avatar{ margin: 0; }
.profile.profile--stack .profile__meter{ margin: 0; }

.profile.profile--stack .profile__name{
  margin: 8px 0 4px;
  font-size: 32px;
  font-weight: 800;
  text-align: center;
}
.profile.profile--stack .profile__caption{
  margin: 0 0 8px;
  color: #16a34a;
  font-weight: 600;
  text-align: center;
}

/* карточки — ровной стопкой по центру */
.profile.profile--stack .profile__stack{
  width: 100%;
  max-width: 680px;               /* ширина колонки карточек */
  margin: 12px auto 24px;
  display: flex;
  flex-direction: column;
  gap: 16px;
  clear: both;                    /* на всякий случай убираем обтекание */
}

/* внутри карточек ссылки — не абсолютные, чтобы не выдавливали контент */
.profile.profile--stack .profile-card__body{ position: static; padding-right: 0; }
.profile.profile--stack .link{ position: static; }

/* --- Профиль: хедер в 2 колонки --- */
.profile__header.profile__header--row{
  max-width: 980px;
  margin: 16px auto 0;
  display: grid;
  grid-template-columns: 180px 1fr; /* слева аватар+метр, справа имя+процент */
  align-items: center;
  column-gap: 32px;
}

.profile__col--left{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:16px;
}
.profile__col--right{
  display:flex;
  flex-direction:column;
  align-items:flex-start;
}

.profile__name{
  margin: 0 0 6px;
  font-size: 40px;          /* как на макете, можно подправить */
  font-weight: 800;
}
.profile__caption{
  margin: 0;
  color:#16a34a;
  font-weight:600;
}

/* --- Карточки: одна колонка, одинаковый размер --- */
.profile__stack{
  width: 100%;
  margin: 16px auto 24px;
  display: grid;
  grid-template-columns: 1fr;
  justify-items: center;    /* центрируем карточку */
  row-gap: 16px;
}

.profile-card{
  width: 680px;             /* одинаковая ширина */
  max-width: 100%;
}
.profile-card--equal{
  min-height: 160px;        /* одинаковая высота (при необходимости подстрой) */
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
}

/* Адаптив — на узких экранах хедер станет в столбик */
@media (max-width: 720px){
  .profile__header.profile__header--row{
    grid-template-columns: 1fr;
    justify-items: center;
    text-align: center;
  }
  .profile__col--right{ align-items:center; }
  .profile-card{ width: 100%; }
}


/* ====== LEVEL — версия по макету ====== */

/* контейнер */
.level.level--v1{
  max-width: 980px;
  margin: 0 auto;
}

/* бейдж */
.level--v1 .level__badge{ display:flex; justify-content:center; margin:16px 0 8px; }
.level--v1 .level__badge-circle{
  width:112px; height:112px; border-radius:50%;
  background:#facc15;            /* жёлтый */
  display:flex; align-items:center; justify-content:center;
  font-weight:800;
  box-shadow: inset 0 0 0 2px rgba(0,0,0,.1);
}

/* имя крупнее */
.level--v1 .level__name{
  text-align:center;
  margin:12px 0 8px;
  font-size:48px;
  font-weight:800;
}

/* прогресс — узкая капсула + подпись справа */
.level--v1 .level__progress{
  display:flex; align-items:center; gap:12px; justify-content:center;
  margin-bottom:8px;
}
.level--v1 .level__progress-bar{
  width:360px; height:10px; background:#e5e7eb; border-radius:999px; overflow:hidden;
}
.level--v1 .level__progress-next{ color:#111827; }

/* заголовок/вкладки: слева ссылка, справа заголовок с линией */
.level--v1 .level__tabs{
  display:grid; grid-template-columns: 1fr 1fr;
  align-items:end; gap:16px;
  margin:12px 0 12px;
}
.level--v1 .level__tabs .link{ justify-self:start; }
.level--v1 .level__tabs-right{
  position:relative; height:28px; display:flex; align-items:center; justify-content:center;
}
.level--v1 .level__tabs-title{ background:transparent; font-weight:700; padding:0 10px; position:relative; z-index:1; }
.level--v1 .level__tabs-divider{
  position:absolute; left:0; right:0; bottom:8px; height:2px; background:#e5e7eb;
}

/* контент: две колонки по центру */
.level--v1 .level__content{
  display:grid; grid-template-columns: 1fr 1fr; gap:24px; align-items:start;
}

/* слева — три пилюли одинакового вида/размера */
.level--v1 .level__projects{
  display:grid; grid-template-rows: repeat(3, auto); gap:24px; justify-items:center;
}
.level--v1 .level__pill{
  width:440px; max-width:100%;
  padding:24px 28px; text-align:center;
  background:#fff; border:2px solid #d1d5db; border-radius:28px;
  font-weight:700; line-height:1.3;
}

/* справа — вертикальная лестница */
.level--v1 .level__ladder--v1{
  display:flex; flex-direction:column; align-items:center; gap:14px;
}
.level--v1 .chip{ padding:18px 24px; border-radius:28px; border:2px solid #d1d5db; font-weight:700; background:#f9fafb; }
.level--v1 .chip--ghost{ background:#fff; }
.level--v1 .chip--success{ background:#34d399; border-color:#22c55e; color:#0b2a1a; }
.level--v1 .chip--dashed{ background:#fff; border:2px dashed #d1d5db; color:#111827; }
.level--v1 .chip--xl{ width:440px; max-width:100%; text-align:center; }

/* стрелки между ступеньками */
.level--v1 .level__arrow{
  width:0; height:0;
  border-left:8px solid transparent; border-right:8px solid transparent;
  border-top:10px solid #9ca3af;    /* треугольник вниз */
}

/* адаптив */
@media (max-width: 860px){
  .level--v1 .level__content{ grid-template-columns: 1fr; }
  .level--v1 .level__tabs{ grid-template-columns: 1fr; }
  .level--v1 .level__tabs .link{ justify-self:center; }
  .level--v1 .level__tabs-right{ margin-top:4px; }
  .level--v1 .chip--xl, .level--v1 .level__pill{ width:100%; }
}

/* --- Вкладка "Достижения": линия за текстом и без налезания --- */
.level--v1 .level__tabs{
  margin: 16px 0 20px;                 /* доп. отступ снизу */
}
.level--v1 .level__tabs-right{
  position: relative;
  height: 36px;                         /* чуть выше, чтобы текст не цеплял линию */
  display: flex; align-items: center; justify-content: center;
}
.level--v1 .level__tabs-title{
  position: relative;
  z-index: 2;                           /* поверх линии */
  background: #f6f7fb;                  /* цвет фона страницы — перекрывает линию */
  padding: 0 12px;
  line-height: 1;
  font-weight: 700;
}
.level--v1 .level__tabs-divider{
  position: absolute;
  left: 0; right: 0;
  top: 50%; transform: translateY(-50%);/* линия проходит по центру заголовка */
  height: 2px;
  background: #e5e7eb;
  z-index: 1;
}

/* --- Лестница: все три ступеньки одинаковой длины --- */
.level--v1 .level__ladder--v1 .chip{
  width: 440px;                         /* как у "Джун"/"Миддл" */
  max-width: 100%;
  text-align: center;
}
.level--v1 .level__ladder--v1 .chip--ghost{
  background: #fff;                     /* "Стажёр" — белая пилюля */
  border-color: #d1d5db;                /* такая же рамка, как у пилюль слева */
}
/* чуть больше воздуха между стрелками и пилюлями */
.level--v1 .level__arrow{ margin: 6px 0; }
